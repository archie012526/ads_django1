{% extends "main/base.html" %}
{% load static %}

{% block title %}Security{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'style/setting-sidebar.css' %}">
{% endblock %}

{% block content %}
<div class="settings-container">

    <!-- SIDEBAR -->
    <aside class="settings-nav">
        <ul class="nav-links">
            <li><a href="{% url 'settings_account' %}">Account</a></li>
            <li><a href="{% url 'settings_privacy' %}">Privacy</a></li>
            <li><a href="{% url 'settings_language' %}">Language &amp; Appearance</a></li>
            <li><a href="{% url 'settings_security' %}" class="sidebar-highlight-bg">Security</a></li>
            <li><a href="{% url 'settings_data_control' %}">Data &amp; Account Control</a></li>
            <li><a href="{% url 'settings_help' %}">Help &amp; Support</a></li>
            <li><a href="{% url 'logout' %}" class="logout-link">Log Out</a></li>
        </ul>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="settings-content">
        <h2 class="page-title">Security</h2>

        <form method="post" class="settings-form">
            {% csrf_token %}

            <!-- ===============================
                 CHANGE PASSWORD
            =============================== -->
            <h3 class="section-title">Change Password</h3>

            <label>Current password</label>
            <input type="password" name="old_password" class="text-input" placeholder="Enter current password">

            <label>New password</label>
            <input type="password" name="new_password1" class="text-input" placeholder="Enter new password">

            <label>Confirm new password</label>
            <input type="password" name="new_password2" class="text-input" placeholder="Confirm new password">

            <p class="hint-text">
                Use at least 8 characters with a mix of letters, numbers, and symbols.
            </p>

            <!-- ===============================
                 TWO-FACTOR AUTHENTICATION
            =============================== -->
            <h3 class="section-title">Two-Factor Authentication</h3>

            <div class="toggle-row">
                <span>Enable two-factor authentication</span>
                <label class="toggle-switch">
                    <input type="checkbox" name="two_factor_enabled" {% if form.two_factor_enabled.value %}checked{% endif %}>
                    <span class="slider"></span>
                </label>
            </div>

            <p class="hint-text">
                Adds an extra layer of security using SMS or authenticator apps.
            </p>

            <!-- ===============================
                 SECURITY ALERTS
            =============================== -->
            <h3 class="section-title">Security Alerts</h3>

            <label>Emergency contact number</label>
            <input type="text"
                   name="emergency_contact"
                   class="text-input"
                   placeholder="+63 9XX XXX XXXX">

            <div class="checkbox-card">
                <label class="checkbox-item">
                    <input type="checkbox" name="email_alerts" checked>
                    <span>Email alerts for suspicious activity</span>
                </label>

                <label class="checkbox-item">
                    <input type="checkbox" name="sms_alerts">
                    <span>SMS alerts for new logins</span>
                </label>
            </div>

            <!-- ===============================
                 LOGIN ACTIVITY
            =============================== -->
            <h3 class="section-title">Login Activity</h3>

            <ul class="activity-list">
                <li>
                    <strong>Chrome • Windows</strong>
                    <span>Manila, PH • Active now</span>
                </li>
                <li>
                    <strong>Mobile • Android</strong>
                    <span>Cebu, PH • 2 days ago</span>
                </li>
                <li>
                    <strong>Safari • iOS</strong>
                    <span>Singapore • 1 week ago</span>
                </li>
            </ul>

            <button type="submit" name="action" value="logout_all" class="danger-btn">
                Logout from all devices
            </button>

            <!-- ===============================
                 SAVE
            =============================== -->
            <button type="submit" class="save-changes-btn">
                Save Security Settings
            </button>

        </form>
    </main>
</div>
{% endblock %}

{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ADS Project{% endblock %}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">


    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        .input-field {
            width: 100%;
            margin-top: 0.25rem;
            padding: 0.5rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            outline: none;
        }
        .input-field:focus {
            border-color: #a855f7;
            box-shadow: 0 0 0 3px rgb(168 85 247 / 0.3);
        }

        /* Dark Mode Styles */
        body.dark-mode {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        body.dark-mode .header {
            background-color: #2d3748;
            border-bottom: 1px solid #4a5568;
        }
        body.dark-mode .search-bar {
            background-color: #374151;
            border-color: #4b5563;
        }
        body.dark-mode .search-input {
            background-color: #374151;
            color: #e2e8f0;
        }
        body.dark-mode .nav-item {
            color: #cbd5e0;
        }
        body.dark-mode .nav-item:hover,
        body.dark-mode .nav-active {
            color: #ffffff;
        }
        body.dark-mode .profile-card,
        body.dark-mode .create-post-card,
        body.dark-mode .post-card,
        body.dark-mode .job-card,
        body.dark-mode .recommended-card,
        body.dark-mode .bg-white {
            background-color: #2d3748 !important;
            border-color: #4a5568 !important;
        }
        body.dark-mode input,
        body.dark-mode textarea,
        body.dark-mode select {
            background-color: #374151;
            color: #e2e8f0;
            border-color: #4b5563;
        }
        body.dark-mode .text-gray-900,
        body.dark-mode .text-gray-800,
        body.dark-mode .text-gray-700 {
            color: #e2e8f0 !important;
        }
        body.dark-mode .text-gray-600,
        body.dark-mode .text-gray-500 {
            color: #cbd5e0 !important;
        }
        body.dark-mode .settings-container {
            background-color: #1a202c;
        }
        body.dark-mode .settings-nav,
        body.dark-mode .settings-content {
            background-color: #2d3748;
            border-color: #4a5568;
        }
    </style>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'style/base.css' %}?v=7">
    <link rel="stylesheet" href="{% static 'style/styles.css' %}">
    <link rel="stylesheet" href="{% static 'style/landing.css' %}">

    {% block extra_head %}{% endblock %}
</head>

<body {% if user.is_authenticated and user.profile.dark_mode %}class="dark-mode"{% endif %}>

        <!-- Logo -->
    <header class="header">
        <div class="left-side">
            <div class="logo-circle">
                <svg class="logo-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                </svg>
            </div>

        <!-- âœ… SEARCH BAR (NOW FUNCTIONAL) -->
        <form method="get" action="{% url 'search' %}" class="search-bar flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="11" cy="11" r="7" stroke-width="2"/>
                <path d="M16 16l4 4" stroke-width="2"/>
            </svg>

            <input
                type="text"
                name="q"
                placeholder="Search jobs, people, employers..."
                value="{{ request.GET.q }}"
                class="search-input"
            >
        </form>

    </div>

    <!-- CENTER NAV -->
    <nav class="nav-center">

        <a href="{% url 'homepage' %}"
           class="nav-item nav-link flex items-center gap-1 {% if request.path == '/' %}nav-active{% endif %}">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M3 10.5L12 4l9 6.5V21H3V10.5z" stroke-width="2"/>
            </svg>
            <span>Home</span>
        </a>

        <a href="{% url 'find_job' %}"
           class="nav-item nav-link flex items-center gap-1 {% if request.path == '/find-job/' %}nav-active{% endif %}">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M3 7h18v13H3V7zm6-4h6v4H9V3z" stroke-width="2"/>
            </svg>
            <span>Find Jobs</span>
        </a>

        <a href="{% url 'messages' %}"
           class="nav-item nav-link flex items-center gap-1 {% if request.path == '/messages/' %}nav-active{% endif %}">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M4 5h16v10H7l-3 3V5z" stroke-width="2"/>
            </svg>
            <span>Messages</span>
        </a>

        <a href="{% url 'notifications' %}"
           class="nav-item nav-link flex items-center gap-1 {% if request.path == '/notifications/' %}nav-active{% endif %}">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M12 2a6 6 0 0 1 6 6v4l2 3H4l2-3V8a6 6 0 0 1 6-6zm0 19a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2z" stroke-width="2"/>
            </svg>
            <span>Notifications</span>
        </a>

        <a href="{% url 'profile' %}"
           class="nav-item nav-link flex items-center gap-1 {% if request.path == '/profile/' %}nav-active{% endif %}">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="12" cy="7" r="4" stroke-width="2"/>
                <path d="M4 21c0-4 4-7 8-7s8 3 8 7" stroke-width="2"/>
            </svg>
            <span>Me</span>
        </a>

    </nav>

    
</header>

<!-- GLOBAL NOTIFICATIONS BANNER -->
{% if global_notifications %}
    <div class="global-notifications-container">
        {% for note in global_notifications %}
            <div class="global-notification global-notification-{{ note.level }}">
                <div class="global-notification-content">
                    <div class="global-notification-icon">
                        {% if note.level == 'info' %}
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 16v-4M12 8h.01"></path>
                            </svg>
                        {% elif note.level == 'warning' %}
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"></path>
                                <path d="M12 9v4M12 17h.01"></path>
                            </svg>
                        {% elif note.level == 'danger' %}
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M15 9l-6 6M9 9l6 6"></path>
                            </svg>
                        {% endif %}
                    </div>
                    <div class="global-notification-text">
                        <strong>{{ note.title }}</strong>
                        <span>{{ note.message }}</span>
                    </div>
                </div>
                <button onclick="this.parentElement.remove()" class="global-notification-close">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
        {% endfor %}
    </div>
{% endif %}

<!-- MAIN CONTENT -->
{% block content %}{% endblock %}

</body>
<script>
document.getElementById("themeToggle")?.addEventListener("change", function () {
    document.body.classList.toggle("dark-theme", this.checked);
});
</script>

</html>

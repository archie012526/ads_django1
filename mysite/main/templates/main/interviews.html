{% extends "main/base.html" %}
{% load static %}

{% block extra_head %}
<style>
    body { background: #f7f7fb; }
    .interviews-container { max-width: 1100px; margin: 32px auto; padding: 0 20px; }
    .page-header { background: white; padding: 24px; border-radius: 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); margin-bottom: 20px; }
    .page-header h1 { font-size: 26px; font-weight: 800; color: #1a1a1a; }

    .applications-grid { display: grid; gap: 16px; }
    .application-card { background: white; border-radius: 14px; padding: 20px; box-shadow: 0 2px 12px rgba(0,0,0,0.04); display: flex; align-items: center; gap: 16px; }
    .application-info { flex: 1; }
    .job-title { font-weight: 700; color: #0a66c2; }
    .meta { color: #666; font-size: 13px; }
    .status-badge { display:inline-block; padding:4px 10px; border-radius:999px; font-size:12px; font-weight:700; color:#fff; }
    .status-badge.interview { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }

    .empty-state { background: white; border-radius: 16px; padding: 48px; text-align: center; box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
    .btn { padding: 10px 16px; border-radius: 10px; text-decoration: none; background:#0a66c2; color:#fff; }
</style>
{% endblock %}

{% block content %}
<div class="interviews-container">
    <div class="page-header">
        {% if is_employer %}
            <h1>üéôÔ∏è Interviews (Your Jobs)</h1>
        {% else %}
            <h1>üéôÔ∏è My Interviews</h1>
        {% endif %}
    </div>

    {% if applications %}
        <div class="applications-grid">
            {% for app in applications %}
                <div class="application-card">
                    {% if is_employer %}
                        <div class="application-info">
                            <div><strong>{{ app.user.profile.full_name|default:app.user.username }}</strong></div>
                            <div class="job-title">For: {{ app.job.title }}</div>
                            <div class="meta">Applied {{ app.applied_at|date:"M d, Y" }}</div>
                        </div>
                        <span class="status-badge interview">Interview</span>
                        <a href="{% url 'conversation' app.user.id %}" class="btn">Message</a>
                    {% else %}
                        <div class="application-info">
                            <div class="job-title">{{ app.job.title }}</div>
                            <div class="meta">{{ app.job.company_name|default:"Company" }} ‚Ä¢ {{ app.job.location }}</div>
                            <div class="meta">Applied {{ app.applied_at|date:"M d, Y" }}</div>
                        </div>
                        <span class="status-badge interview">Interview</span>
                        {% if app.job.user != request.user %}
                            <a href="{% url 'conversation' app.job.user.id %}" class="btn">Message Employer</a>
                        {% endif %}
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            {% if is_employer %}
                <p>No interview-stage applications yet.</p>
            {% else %}
                <p>No jobs at interview stage yet.</p>
                <a href="{% url 'find_job' %}" class="btn">Browse Jobs</a>
            {% endif %}
        </div>
    {% endif %}
</div>
{% endblock %}

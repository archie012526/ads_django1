{% extends 'main/base.html' %}
{% load static %}

{% block content %}

<link rel="stylesheet" href="{% static 'style/notifications.css' %}">

<div class="notif-container">


    <h1>Notifications</h1>
    <p class="subtitle">Stay updated with your latest activities and messages</p>

    <div class="notif-header">
        <input type="text" class="search-input" placeholder="Search notifications…">
        
        <div class="controls">
            <button class="control-btn">Filter</button>
            <button class="control-btn">Type</button>
            <button class="control-btn">Analytics</button>
            <a href="{% url 'mark_all_as_read' %}" class="mark-read-btn">Mark All as Read</a>
        </div>
    </div>

    <div class="notif-list">
        {% for notif in notifications %}
        <div class="notif-item {% if not notif.is_read %}unread{% endif %}">
            <div class="notif-icon 
                {% if notif.notification_type == 'job_post' %}blue
                {% elif notif.notification_type == 'message' %}green
                {% elif notif.notification_type == 'job_application' %}orange
                {% else %}purple{% endif %}"></div>

            <div class="notif-content">
                <h3>{{ notif.title }}</h3>
                <p>{{ notif.message }}</p>
                {% if notif.link %}
                    <a href="{{ notif.link }}" style="color: #667eea; font-size: 13px; text-decoration: none; margin-top: 4px; display: inline-block;">View Details →</a>
                {% endif %}
            </div>

            <span class="notif-type">{{ notif.get_notification_type_display }}</span>
            <span class="notif-time">
                {{ notif.created_at|timesince }} ago
            </span>

            <span class="notif-status 
                {% if not notif.is_read %}unread-badge{% else %}read-badge{% endif %}">
                {% if not notif.is_read %}unread{% else %}read{% endif %}
            </span>
        </div>
        {% empty %}
        <p class="no-notifs">You have no notifications.</p>
        {% endfor %}
    </div>

</div>

{% endblock %}

{% extends "main/base.html" %}
{% load static %}

{% block extra_head %}
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{% static 'style/skills.css' %}?v=1">
{% endblock extra_head %}

{% block content %}

<datalist id="skill-options">
{% for value, label in SKILL_OPTIONS %}
    <option value="{{ label }}"></option>
{% endfor %}
</datalist>

<div class="skills-shell">
    <div class="skills-hero">
        <div class="hero-left">
            <div>
                <p class="eyebrow">Skills</p>
                <h1 class="hero-title">Grow your stack</h1>
                <p class="hero-subtitle">Add the skills that best represent you and keep them fresh.</p>
                <div class="hero-actions">
                    <a class="primary-cta" href="#add-skill">Add a skill</a>
                    <a class="ghost-btn" href="{% url 'profile' %}">Back to profile</a>
                </div>
            </div>
        </div>
        <div class="hero-stats">
            <div class="stat-chip">
                <span class="stat-label">Total skills</span>
                <span class="stat-value">{{ skills|length }}</span>
            </div>
            <div class="stat-chip">
                <span class="stat-label">Suggestions</span>
                <span class="stat-value">{{ SKILL_OPTIONS|length }}</span>
            </div>
        </div>
    </div>

    <div class="skills-grid">
        <aside class="skills-sidebar">
            <p class="eyebrow">Navigation</p>
            <div class="link-stack">
                <a href="{% url 'profile' %}">Profile</a>
                <a href="{% url 'settings' %}">Settings</a>
                <a href="{% url 'edit_profile' %}">Edit profile</a>
                <span class="active-link">Skills</span>
                <a class="danger" href="{% url 'logout' %}">Log out</a>
            </div>
        </aside>

        <div class="skills-main">
            <div class="card" id="add-skill">
                <div class="card-header">
                    <div>
                        <p class="eyebrow">Add skill</p>
                        <h2 class="card-title">Add a new skill</h2>
                        <p class="muted">Use the suggestions or type your own and set your proficiency.</p>
                    </div>
                </div>
                <form method="POST" class="form-grid">
                    {% csrf_token %}
                    <div class="field">
                        <label>Skill</label>
                        {{ form.name }}
                    </div>
                    <div class="field">
                        <label>Level</label>
                        {{ form.level }}
                    </div>
                    <div class="field full">
                        <label>Description</label>
                        {{ form.description }}
                    </div>
                    <div class="form-actions">
                        <button class="primary-cta" type="submit">Add skill</button>
                    </div>
                </form>
            </div>

            <div class="card">
                <div class="card-header">
                    <div>
                        <p class="eyebrow">Your list</p>
                        <h2 class="card-title">Current skills</h2>
                        <p class="muted">Edit or remove items to keep your profile accurate.</p>
                    </div>
                </div>
                {% if skills %}
                    <div class="skill-list">
                        {% for skill in skills %}
                        <div class="skill-row">
                            <div>
                                <p class="skill-name">{{ skill.name }}</p>
                                {% if skill.level %}<p class="skill-meta">Level: {{ skill.level }}</p>{% endif %}
                                {% if skill.description %}<p class="skill-meta">{{ skill.description }}</p>{% endif %}
                            </div>
                            <div class="row-actions">
                                <a href="{% url 'edit_skill' skill.id %}" class="ghost-btn small">Edit</a>
                                <a href="{% url 'delete_skill' skill.id %}" class="ghost-btn small danger-btn">Delete</a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="muted">You have no skills added yet.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{% endblock content %}

{% extends "main/base.html" %}
{% load static %}

{% block extra_head %}
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'style/profile.css' %}?v=1">
{% endblock extra_head %}

{% block content %}
    <div class="profile-container">

        <div class="profile-banner">
             <img src="{% static 'images/banner.jpg' %}" class="banner-img">
        </div>

        <div class="profile-layout-wrapper">
            
            <div class="profile-sidebar">
                
                <div class="profile-header">
                    {% if profile.profile_picture %}
                        <img src="{{ profile.profile_picture.url }}" class="profile-img">
                    {% else %}
                        <img src="{% static 'images/default-pfp.png' %}" class="profile-img">
                    {% endif %}

                    <a href="{% url 'profile' %}" class="profile-name">{{ profile.full_name }}</a>
                    <p class="profile-role">{{ profile.bio }}</p>

                    <div class="profile-buttons">
                        <a href="{% url 'edit_profile' %}" class="edit-btn">Edit Profile</a>
                    </div>
                </div>

                <div class="profile-info">
                    <div class="info-card applications">
                        <h3>Applications</h3>
                        <p class="info-number">12</p>
                    </div>

                    <div class="info-card interviews">
                        <h3>Interviews</h3>
                        <p class="info-number">4</p>
                    </div>

                    <div class="info-card status">
                        <h3>Status</h3>
                        <p class="info-number status-good">Active</p>
                    </div>
                </div>

            </div> <div class="profile-main-content">
                    <div class="skills-section">
                        <h2>Skills & Competencies</h2>

                        {% if profile.skills.exists %}
                            <ul>
                                {% for skill in profile.skills.all %}
                                    <li>
                                        <strong>{{ skill.name }}</strong>
                                        â€” {{ skill.level }}

                                        {% if skill.description %}
                                            <br>
                                            <small>{{ skill.description }}</small>
                                        {% endif %}
                                    </li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            <p>No skills added yet.</p>
                        {% endif %}
                    </div>
                            {% if suggested_jobs %}
                            <h2 class="text-xl font-semibold mt-6">Suggested Jobs</h2>

                            {% for job in suggested_jobs %}
                                <div class="border p-4 rounded mb-3">
                                <h3 class="font-bold">{{ job.job_title }}</h3>
                                <p>{{ job.employer_name }}</p>
                                <p>{{ job.job_city }}, {{ job.job_country }}</p>

                                <a href="{{ job.job_apply_link }}"
                                    target="_blank"
                                    class="text-blue-600 underline">
                                    Apply
                                </a>
                                </div>
                            {% endfor %}
                            {% else %}
                                {% if suggested_jobs %}
                                    <h2 class="text-xl font-semibold mt-6">Suggested Jobs</h2>

                                    {% for job in suggested_jobs %}
                                        <div class="border p-4 rounded mb-3">
                                            <h3 class="font-bold">{{ job.job_title }}</h3>
                                            <p>{{ job.employer_name }}</p>
                                            <p>{{ job.job_city }}, {{ job.job_country }}</p>

                                            <a href="{{ job.job_apply_link }}"
                                            target="_blank"
                                            class="text-blue-600 underline">
                                                Apply
                                            </a>
                                        </div>
                                    {% endfor %}
                                {% else %}
                                    <p>No job matches found yet.</p>
                                {% endif %}
                            {% endif %}



            </div> </div> </div>
{% endblock content %}